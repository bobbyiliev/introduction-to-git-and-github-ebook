# Git मर्ज

डेवलपर्स अपने बदलावों के साथ तैयार हो जाने के बाद, वे अपनी फ़ीचर शाखाओं को मुख्य शाखा में मर्ज कर सकते हैं और उन सुविधाओं को वेबसाइट पर लाइव कर सकते हैं।

![मुख्य शाखा में बदलाव मर्ज करें](https://user-images.githubusercontent.com/21223421/111697237-fd5c4f80-883d-11eb-9506-4347ba482250.png)

यदि आपने पिछले अध्याय के चरणों का पालन किया है, तो आपकी `newFeature` शाखा अब 1 कमिट के साथ मुख्य शाखा से आगे है। इसलिए, उन नए बदलावों को मुख्य शाखा में लाने के लिए, हमें `newFeature` शाखा को अपनी `main` शाखा में मर्ज करना होगा।

### शाखा का विलय

आप इन चरणों का पालन करके ऐसा कर सकते हैं:

* सबसे पहले अपनी `main` शाखा पर जाएँ:

```bash
git checkout main
```

* इसके बाद, अपनी `newFeature` शाखा और पिछले अध्याय में किए गए परिवर्तनों को विलय करने के लिए, निम्नलिखित `git merge` कमांड चलाएँ:

```bash
git merge newFeature
```

आउटपुट:

```
ab1007b..a281d25 अपडेट हो रहा है
फ़ास्ट-फ़ॉरवर्ड
feature1.html | 1 +
1 फ़ाइल बदली गई, 1 प्रविष्टि(+)
create mode 100644 feature1.html
```

चूँकि `git merge` कमांड चलाते समय आप `main` शाखा पर थे, इसलिए Git उस शाखा से सभी कमिट्स लेगा और उन्हें `main` शाखा में विलय कर देगा।

अब, यदि आप `ls` कमांड चलाते हैं, तो आपको नई `feature1.html` फ़ाइल दिखाई देगी, और यदि आप `git log` कमांड से कमिट इतिहास की जाँच करते हैं, तो आपको अपनी `main` ब्रांच पर मौजूद `newFeature` ब्रांच से कमिट दिखाई देगा।

मर्ज करने से पहले, आप अपनी वर्तमान ब्रांच और जिस ब्रांच को आप मर्ज करना चाहते हैं, उसके बीच अंतर जाँचने के लिए `git diff` कमांड का फिर से उपयोग कर सकते हैं। उदाहरण के लिए, यदि आप वर्तमान में `main` ब्रांच पर हैं, तो आप निम्न का उपयोग कर सकते हैं:

```bash
git diff newFeature
```

इस स्थिति में, मर्ज सुचारू रूप से हुआ क्योंकि कोई मर्ज विवाद नहीं हुआ। हालाँकि, यदि आप किसी वास्तविक प्रोजेक्ट पर काम कर रहे हैं जिसमें कई लोग बदलाव कर रहे हैं, तो कुछ मर्ज विवाद हो सकते हैं। मूलतः ऐसा तब होता है जब किसी फ़ाइल की एक ही पंक्ति में बदलाव किए जाते हैं, या जब एक डेवलपर एक ब्रांच पर किसी फ़ाइल को संपादित करता है और दूसरा डेवलपर उसी फ़ाइल को हटा देता है।

### विवादों का समाधान

आइए एक विवाद का अनुकरण करें। ऐसा करने के लिए, एक नई शाखा बनाएँ:

```bash
git checkout -b conflictDemo
```

फिर `feature1.html` फ़ाइल को संपादित करें:

```bash
echo "<p>Conflict Demo</p>" >> feature1.html
```

ऊपर दिया गया कमांड `<p>Conflict Demo</p>` स्ट्रिंग को प्रतिध्वनित करेगा, और डबल ग्रेटर चिह्न `>>` की बदौलत, यह स्ट्रिंग `feature1.html` फ़ाइल के निचले भाग में जुड़ जाएगी। आप `cat` कमांड से फ़ाइल की सामग्री की जाँच कर सकते हैं:

```bash
cat feature1.html
```

आउटपुट:

```
<h1>मेरी पहली फ़ीचर शाखा</h1>
<p>Conflict Demo</p>
```

कमिट करने से पहले, आप यह जाँचने के लिए `git status` और `git diff` को फिर से चला सकते हैं कि वास्तव में क्या संशोधित किया गया है।

इसके बाद, आगे बढ़ें और बदलाव को कमिट करें:

```bash
git commit -am "Conflict Demo 1"
```

ध्यान दें कि हमने `git add` कमांड नहीं चलाया, बल्कि `-a` फ़्लैग का इस्तेमाल किया, जिसका मतलब `add` है। आप ऐसा उन फ़ाइलों के लिए कर सकते हैं जिन्हें git में जोड़ा गया है और अभी-अभी संशोधित किया गया है। अगर आपने कोई नई फ़ाइल जोड़ी है, तो आपको उसे पहले `git add` कमांड से स्टेज करना होगा।

अब अपनी `main` ब्रांच पर वापस जाएँ:

```bash
git checkout main
```

और अब, अगर आप `feature1.html` फ़ाइल को चेक करते हैं, तो उसमें केवल `<h1>My First Feature Branch</h1>` लाइन होगी क्योंकि हमने जो बदलाव किया है वह अभी भी केवल `conflictDemo` ब्रांच पर ही मौजूद है।

अब आगे बढ़ते हैं और उसी फ़ाइल में बदलाव करते हैं:

```bash
echo "<p>Conflict: change on main branch</p>" >> feature1.html
```

अब हम `feature1.html` फ़ाइल के नीचे एक अलग सामग्री वाली पंक्ति जोड़ रहे हैं।

आगे बढ़ें और इसे स्टेज करें और बदलाव को कमिट करें:

```bash
git commit -am "Conflict on main"
```

अब आपकी `main` शाखा और `conflictDemo` शाखा में एक ही फ़ाइल में, एक ही पंक्ति में बदलाव हैं। तो चलिए `git merge` कमांड चलाते हैं और देखते हैं क्या होता है:

```bash
git merge conflictDemo
```

आउटपुट:

```
feature1.html का स्वतः विलय
CONFLICT (सामग्री): feature1.html में विलय संघर्ष
स्वचालित विलय विफल; संघर्षों को ठीक करें और फिर परिणाम कमिट करें।
```

जैसा कि हम आउटपुट से देख सकते हैं, मर्ज विफल हो रहा है क्योंकि एक ही फ़ाइल में एक ही लाइन पर बदलाव किए गए थे, इसलिए Git को सही बदलाव के बारे में पता नहीं है।

हमेशा की तरह, टकरावों को ठीक करने के कई तरीके हैं। यहाँ हम उनमें से एक पर चर्चा करेंगे।

अब यदि आप `feature1.html` फ़ाइल की सामग्री की जाँच करें, तो आपको निम्न आउटपुट दिखाई देगा:

```
<h1>मेरी पहली फ़ीचर शाखा</h1>
<<<<<< HEAD
<p>टकराव: मुख्य शाखा में बदलाव</p>
=======
<p>टकराव डेमो</p>
>>>>>>> conflictDemo
```

शुरुआत में, यह थोड़ा मुश्किल लग सकता है, लेकिन आइए जल्दी से इसकी समीक्षा करें:

* `<<<<<<< HEAD`: यह भाग आपकी वर्तमान शाखा में बदलावों की शुरुआत को दर्शाता है। हमारे मामले में, `<p>Conflict: change on main branch</p>` लाइन `main` ब्रांच पर मौजूद है, जो वही ब्रांच है जिस पर हम अभी स्विच कर रहे हैं।
* `=======`: यह लाइन बताती है कि मौजूदा ब्रांच के बदलाव कहाँ खत्म होते हैं और नई ब्रांच के बदलाव कहाँ से आ रहे हैं। हमारे मामले में, नई ब्रांच का बदलाव `<p>Conflict Demo</p>` लाइन है।
* `>>>>>> conflictDemo`: यह उस ब्रांच का नाम बताता है जिससे बदलाव आ रहे हैं।

आप अनावश्यक लाइनों को मैन्युअल रूप से हटाकर टकराव का समाधान कर सकते हैं, इसलिए अंत में, फ़ाइल इस तरह दिखाई देगी:

```
<h1>मेरी पहली फ़ीचर ब्रांच</h1>
<p>Conflict: change on main branch</p>
```

उदाहरण के लिए, अगर आप VS Code जैसे IDE का इस्तेमाल कर रहे हैं, तो यह आपको एक बटन क्लिक करके यह चुनने की सुविधा देगा कि कौन से बदलाव रखने हैं।

संघर्ष का समाधान होने के बाद, आपको एक और कमिट करना होगा क्योंकि अब संघर्ष का समाधान हो गया है:

```bash
git commit -am "मर्ज संघर्ष का समाधान करें"
```

### निष्कर्ष

Git शाखाएँ और मर्ज आपको अन्य लोगों के साथ मिलकर किसी प्रोजेक्ट पर काम करने की सुविधा देते हैं। ध्यान रखने योग्य एक महत्वपूर्ण बात यह है कि आप नियमित रूप से अपनी स्थानीय `मुख्य` शाखा में बदलाव करते रहें ताकि वे दूरस्थ शाखा से पीछे न रह जाएँ।

अब तक हमने जो कुछ भी बताया है, उससे सहज होने के बाद, कुछ और कमांड आपके लिए उपयोगी हो सकते हैं, जैसे `git rebase` कमांड और `git cherry-pick` कमांड, जो आपको यह चुनने की सुविधा देते हैं कि आप किसी विशिष्ट शाखा से कौन से कमिट अपनी वर्तमान शाखा में ले जाना चाहते हैं।
